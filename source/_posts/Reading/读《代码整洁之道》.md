---
title: 读《代码整洁之道》
date: 2019-11-10 22:24:10
tags: [READ,JAVA]
categories: READ
---
读`代码整洁之道（Clean Code）`对开发的一些认知与启示

<!-- more -->

#### 1.有意义的命名

尽量使用可以表示意义的命名，比如一个`int d;`,本意是代表消逝时间，那为何不用`int elapsedTimeStamp`代替呢？

不使用魔数，使用能代表业务意义的字段代替：

```java
//代码的业务意义是：i1为性别，1代表男性，2代表女性；此函数的作用为判断性别是否为男性
public int judge(int i1) {
  if (i1 == 1) {
		return true;
  } else if (i1 == 2){
		return false;
  } else {
    throw new RuntimeException("...");
  }
}

//以下为修改后代码,尽量使用易懂的常量名代替魔数
private static final int MALE = 1;
private static final int FEMALE = 2;
public int isMale(int gender) {
  if (gender == MALE) {
		return true;
  } else if (gender == FEMALE){
		return false;
  } else {
    throw new RuntimeException("...");
  }
}
```

另外，一些意义冗余的名称也不要随意用，比如在一个函数里，用`account、accountInfo、accountData`,`moneyAmount`与`money`，`theMessage`与`message`，诸如此类，意义基本上都是一样的，所以尽量使用简单、易懂、不冗余的命名。

#### 2.函数行为控制

- 短小（行数不要太长，可以抽取尽量抽取）
- 少做事（原书中说只能做一件事，这个就看个人理解了，我觉得类似于主流程肯定无法避免多次调用了）
- 根据自顶向下读代码来抽象代码（类似于abstract抽象类进行代码整体层次的架构）
- 函数入参不宜太多，控制在1～2个，3个及以上的入参尽量考虑封装成对象
- 保持函数的单纯，不要掺杂副作用（比如一个校验用户密码，就保持它的单纯性只是用来校验，返回一个boolean，而不是校验通过之后又连带着进行session初始化）

#### 3.用好注释

- 能用代码通顺的表达，就尽量不用注释
- 可以使用TODO注释表达将来要做的工作
- 如果编写的是公共API，最好带上一份良好的Javadoc
- 不要有多余的注释，显得很乱很废话（比如javabean里某个字段，你也不用注释成“user对象的name字段”）
- 注释信息过多（精简即可，实际上jdk里很多javadoc都是废话一堆）

#### 4.代码格式

- 垂直格式（关注代码行数）

  - 短文件比长文件易于理解，项目中每个文件尽量保持均匀且不过长的代码行数
  - 像报纸排版一样，在Java基类中给出高层次概念、算法，细节应往下渐次展开
  - 代码间区隔，包声明、导入声明、函数等之间最好有空白行区隔，提高可读性
  - 实体变量声明应该在顶部（Java习惯），而不应突然出现在各个函数中间

  ```java
  @Getter
  @Setter
  public class User {
    //属性名放上面
    private String name;
    private String gender;
    
    //函数放下面
    public boolean isMale {
  		 return MALE.equals(gender);
    }
    
  }
  ```

  

  - 相关函数应该在上下文比较接近的位置，比如一个函数调用另一个函数，最好把它们放在一块

- 横向格式（关注代码每行字符数）

  - 尽量让代码行短小，易于阅读
  - 不要追求水平对齐（你并不是一个汇编程序员）
  - 最求所有代码都在同一行，还不如增加换行与缩进，这样很明显更容易阅读

#### 5.对象与数据结构

